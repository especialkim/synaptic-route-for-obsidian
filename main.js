/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var w=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var X=(o,e)=>{for(var t in e)w(o,t,{get:e[t],enumerable:!0})},j=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of L(e))!U.call(o,r)&&r!==t&&w(o,r,{get:()=>e[r],enumerable:!(n=H(e,r))||n.enumerable});return o};var _=o=>j(w({},"__esModule",{value:!0}),o);var J={};X(J,{default:()=>P});module.exports=_(J);var V=require("obsidian");var E=require("obsidian"),F={mySetting:"default"},f=class extends E.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}display(){let{containerEl:t}=this;t.empty(),t.createEl("h1",{text:"Sample Plugin Template"})}};var C=require("obsidian");var I=require("child_process"),T=require("util"),$=require("os"),O=(0,T.promisify)(I.exec),G={darwin:"/Applications/Cursor.app/Contents/MacOS/Cursor",win32:"cursor",linux:"cursor"};async function K(o){try{let e=(0,$.platform)();if(console.log(`\uD604\uC7AC \uD50C\uB7AB\uD3FC: ${e}`),o==="cursor"){let i=G[e];return console.log(`Cursor \uAE30\uBCF8 \uACBD\uB85C \uC0AC\uC6A9: ${i}`),i}let t=e==="win32"?`where ${o}`:`which ${o}`;console.log(`\uC2E4\uD589\uD560 \uBA85\uB839\uC5B4: ${t}`),console.log(`\uD604\uC7AC PATH: ${process.env.PATH}`);let{stdout:n}=await O(t,{env:{...process.env,PATH:process.env.PATH}}),r=n.trim().split(`
`)[0];return console.log(`\uCC3E\uC740 \uD504\uB85C\uADF8\uB7A8 \uACBD\uB85C: ${r}`),r}catch(e){throw console.error(`\uD504\uB85C\uADF8\uB7A8 \uACBD\uB85C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${o}`,e),new Error(`\uD504\uB85C\uADF8\uB7A8 ${o}\uC744(\uB97C) \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`)}}async function a(o,e){try{let t=await K(o);console.log(`\uC2E4\uD589 \uC911: ${t} -n "${e}"`),await O(`"${t}" -n "${e}"`)}catch(t){throw console.error(`${o} \uBA85\uB839\uC5B4 \uC2E4\uD589 \uC2E4\uD328:`,t),t}}var b=require("path");function s(o){return o.vault.adapter.basePath}function p(o,e){return`${o}/${e}`}function N(o,e){let t=(0,b.dirname)(e).split("/");return t.reduce((n,r,i)=>{if(t.length-i<=0)return n;let v=t.slice(0,t.length-i).join("/"),c=p(o,v);return n.push({display:v||"/",path:c}),n},[])}var l=class{constructor(e){this.context=e;this.id="open-active-file-with-cursor";this.name="Open Current File with Cursor";this.command="cursor"}async execute(){let e=this.context.app.workspace.getActiveFile();if(!e){new C.Notice("No active file");return}try{let t=s(this.context.app),n=p(t,e.path);await a(this.command,n),new C.Notice("File opened in Cursor")}catch(t){console.error("Failed to open file in Cursor:",t),new C.Notice("Failed to open file in Cursor. Is Cursor installed?")}}};var h=require("obsidian");var k=require("path");var M=require("obsidian"),m=class extends M.Modal{constructor(t,n,r,i){super(t);this.title=n;this.options=r;this.onSelect=i;this.selectedIndex=0}onOpen(){var n;let{contentEl:t}=this;t.empty(),(n=t.parentElement)==null||n.addClass("synaptic-route-modal"),t.createEl("h2",{text:this.title}),this.suggestEl=t.createDiv("suggestion-container"),this.renderSuggestions(),this.registerNavigationKeys()}renderSuggestions(){this.suggestEl.empty(),this.options.forEach((t,n)=>{let r=this.suggestEl.createDiv("suggestion-item");n===this.selectedIndex&&r.addClass("is-selected"),r.createDiv({text:t,cls:"suggestion-content"}),r.addEventListener("click",()=>{this.selectOption(n)}),r.addEventListener("mouseenter",()=>{this.selectedIndex=n,this.renderSuggestions()})})}registerNavigationKeys(){this.scope.register([],"ArrowUp",()=>(this.selectedIndex=(this.selectedIndex-1+this.options.length)%this.options.length,this.renderSuggestions(),!1)),this.scope.register([],"ArrowDown",()=>(this.selectedIndex=(this.selectedIndex+1)%this.options.length,this.renderSuggestions(),!1)),this.scope.register([],"Enter",()=>(this.selectOption(this.selectedIndex),!1))}selectOption(t){this.onSelect(this.options[t]),this.close()}onClose(){let{contentEl:t}=this;t.empty()}};var u=class{constructor(e){this.context=e;this.id="open-parent-folder-with-cursor";this.name="Open Parent Folder with Cursor";this.command="cursor"}async execute(){let e=this.context.app.workspace.getActiveFile();if(!e){new h.Notice("No active file");return}try{let t=s(this.context.app),n=p(t,e.path),r=(0,k.dirname)(n),i=N(t,e.path);if(i.length<=1){await a(this.command,r),new h.Notice("Parent folder opened in Cursor");return}new m(this.context.app,"\uD3F4\uB354 \uC120\uD0DD",i.map(c=>c.display),async c=>{let A=i.find(W=>W.display===c);A&&(await a(this.command,A.path),new h.Notice("Selected folder opened in Cursor"))}).open()}catch(t){console.error("Failed to open parent folder in Cursor:",t),new h.Notice("Failed to open parent folder in Cursor. Is Cursor installed?")}}};var S=require("obsidian");var d=class{constructor(e){this.context=e;this.id="open-vault-with-cursor";this.name="Open Vault with Cursor";this.command="cursor"}async execute(){try{let e=s(this.context.app);await a(this.command,e),new S.Notice("Vault opened in Cursor")}catch(e){console.error("Failed to open vault in Cursor:",e),new S.Notice("Failed to open vault in Cursor. Is Cursor installed?")}}};function D(o){let e={app:o.app,plugin:o},t=[new l(e),new u(e),new d(e)];return t.forEach(n=>{o.addCommand({id:n.id,name:n.name,callback:()=>n.execute()})}),t}var y=require("obsidian");var x=class{constructor(e){this.plugin=e;this.id="open-with-cleanshot";this.name="Open With CleanShotX";this.command="cleanshot"}async execute(e){try{let t=s(this.plugin.app),n=p(t,(e==null?void 0:e.path)||""),i=`cleanshot://open-annotate?filepath=${encodeURIComponent(n)}`;window.open(i),new y.Notice("File opened in CleanShotX")}catch(t){console.error("Failed to open file in CleanShotX:",t),new y.Notice("Failed to open file in CleanShotX. Is CleanShotX installed?")}}};var g=class{constructor(e){this.plugin=e;this.cleanShotCommand=new x(e)}register(){let e=this.plugin.app.workspace.on("file-menu",(t,n)=>{(n.extension==="png"||n.extension==="jpg"||n.extension==="jpeg"||n.extension==="gif"||n.extension==="svg")&&t.addItem(r=>{r.setTitle("Open With CleanShotX \u{1F58C}\uFE0F").setIcon("image").onClick(()=>{this.cleanShotCommand.execute(n)})})});this.plugin.register(()=>{this.plugin.app.workspace.offref(e)})}};function R(o){new g(o).register()}var P=class extends V.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new f(this.app,this)),D(this),R(this)}onunload(){this.app.workspace.trigger("unload")}async loadSettings(){this.settings=Object.assign({},F,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
